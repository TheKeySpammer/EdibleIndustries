<%include ../partials/header %>

<div class="container" style="margin-bottom: 200px;">
    <h1 class="title">Edit Customer</h1>
    <form action="/customer/<%=customer.id%>?_method=PUT" method="POST" id="edit-new-customer-form">
        <h5 class="title is-5">Name</h5>
        <div class="columns">
            <div class="column">
                <div class="field">
                    <div class="control has-icons-left">
                        <input type="text" class="input" id="first_name" value="<%=customer.first_name%>" name="first_name" placeholder="First Name">
                        <span class="icon is-left is-small">
                            <i class="fas fa-user"></i>
                        </span>
                        <p style="display: none;" class="help is-danger">Please Enter First Name</p>
                    </div>
                </div>
            </div>
            <div class="column">
                <div class="field">
                    <div class="control has-icons-left">
                        <input type="text" class="input" id="last_name" value="<%=customer.last_name%>" name="last_name" placeholder="Last Name">
                        <span class="icon is-left is-small">
                            <i class="fas fa-user">

                            </i>
                        </span>
                    </div>
                </div>
            </div>
        </div>
        <h5 class="title is-5">Organization</h5>
        <div class="columns">
            <div class="column">
                <div class="field">
                    <div class="control has-icons-left">
                        <input type="text" class="input" value="<%=customer.organization%>" id="organization" name="organization"
                            placeholder="Organization">
                        <span class="icon is-left is-small">
                            <i class="fas fa-building"></i>
                        </span>
                    </div>
                </div>
            </div>
        </div>
        <h5 class="title is-5">VAT Number</h5>
        <div class="columns">
            <div class="column">
                <div class="field">
                    <div class="control has-icons-left">
                        <input type="text" class="input" id="vat" name="vat"
                            placeholder="VAT Number" >
                        <span class="icon is-left is-small">
                            <i class="fas fa-money-check-alt"></i>
                        </span>
                    </div>
                </div>
            </div>
        </div>
        <h5 class="title is-5">Details</h5>
        <div class="columns">
            <div class="column">
                <div class="field">
                    <div class="control has-icons-left">
                        <input type="email" class="input" value="<%=customer.email%>" id="email" name="email" placeholder="Email">
                        <span class="icon is-left is-small">
                            <i class="fas fa-envelope"></i>
                        </span>
                    </div>
                </div>
            </div>
            <div class="column">
                <div class="field has-addons">
                    <p class="control">
                        <span class="select">
                            <select id="phone-code" name="phone_code">
                                <option <%= customer.phone_code == '+977'?'selected':''; %> value="+977">+977</option>
                                <option <%= customer.phone_code == '+91'?'selected':''; %> value="+91">+91</option>
                            </select>
                        </span>
                    </p>
                    <p class="control is-expanded">
                        <input class="input" type="text" value="<%=customer.phone%>" placeholder="Phone" id="phone" name="phone">
                    </p>
                </div>
            </div>
        </div>
        <h5 class="title is-5">Address</h5>
        <div class="columns">
            <div class="column">
                <div class="field">
                    <div class="control has-icons-left">
                        <input type="text" class="input" value="<%=customer.address1%>" id="address" name="address" placeholder="Address">
                        <span class="icon is-left is-small">
                            <i class="fas fa-address-card"></i>
                        </span>
                    </div>
                </div>
            </div>
        </div>
        <div class="columns">
            <div class="column">
                <div class="field">
                    <div class="control">
                        <label for="zone" class="label">Anchal</label>
                        <div class="select is-fullwidth">
                            <select name="zone" id="zone">
                                <option value="" selected disabled></option>
                                <% for(let i=0; i< zones.length; i++) { const zone = zones[i]; %>
                                <option <%= customer.zone != null && customer.zone.id == zone.id ? 'selected':''; %> value="<%=zone.id%>"><%=zone.value;%></option>
                                <% } %>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            <div class="column">
                <div class="field">
                    <div class="control">
                        <label for="district" class="label">Jilla</label>
                        <div class="select is-fullwidth">
                            <select name="district" id="district">
                                <option value="" disabled selected></option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            <div class="column">
                <div class="field">
                    <div class="control">
                        <label for="post_office" class="label">City/Postal Code</label>
                        <div class="select is-fullwidth">
                            <select name="post_office" id="post_office">
                                <option value="" disabled selected></option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <h5 class="title is-5">Customer Type</h5>
        <div class="columns">
            <div class="column is-10">
                <div class="field">
                    <div class="control has-icons-left">
                        <div class="select">
                            <select name="customer_type" id="customer_type">
                                <option value="" selected disabled></option>
                                <% for(let i=0; i< types.length; i++) { const type = types[i]; %>
                                <option <%= customer.customer_type.id == type.id ? 'selected' : ''; %> value="<%=type.id%>"><%=type.name%></option>
                                <% } %>
                            </select>
                            <p style="display: none;" class="help is-danger">Please Select Customer Type</p>
                        </div>
                        <span class="icon is-left is-small">
                            <i class="fas fa-user-tag"></i>
                        </span>
                    </div>
                </div>
            </div>
            <div class="column">
                <div class="field is-grouped is-grouped-right">
                    <p class="control">
                        <a href="/customer/customer-type" class="button is-info is-rounded">Customer Types</a>
                    </p>
                </div>
            </div>
        </div>
        <div class="set-rates">
            <h5 class="title is-5">Rates</h5>
            <table class="table is-bordered is-fullwidth">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Inventory Name</th>
                        <th>Packing</th>
                        <th>Rate</th>
                        <th>Default</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
            <template>
                <tr>
                    <td class="inventory-id">1</td>
                    <td class="inventory-name"></td>
                    <td class="packing-name"></td>
                    <td>
                        <div class="field">
                            <div class="control has-icons-left">
                                <input type="number" class="input" min="0" step="any">
                                <span class="icon is-left is-small">
                                    Re.
                                </span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="field">
                            <div class="control">
                                <button type="button" class="button is-small is-info is-rounded is-light">Default</button>
                            </div>
                        </div>
                    </td>
                </tr>
            </template>
        </div>
        <div class="field is-grouped is-grouped-right">
            <p class="control">
                <button class="button is-large is-success is-rounded">Submit</button>
            </p>
            <p class="control">
                <a href="/customer/<%=customer.id%>" class="button is-large is-light is-rounded">
                    Cancel
                </a>
            </p>
        </div>

    </form>
</div>

<script>
    const zone_id = parseInt("<%= customer.zone != null ? customer.zone.id : -1%>");
    const district_id = parseInt("<%= customer.district != null ? customer.district.id : -1%>");
    const post_office_id = parseInt("<%= customer.post_office != null ? customer.post_office.id : -1%>");

    const customer_id = parseInt("<%= customer.id; %>");
    
</script>

<%include ../partials/footer %>